<div class="chat-container">
  <h2 class="chat-title">Chats</h2>

  <!-- 🔍 Search Users -->
  <form [formGroup]="searchForm" class="search-section">
    <input
      type="text"
      formControlName="query"
      placeholder="🔍 Search users to chat..."
      class="search-input"
    />

    <!-- Always visible Create Group button -->
    <button type="button" class="create-group-btn" (click)="createGroupManual()">
      ➕ Create Group
    </button>
  </form>

  <!-- 🧑 Search Results -->
  <div *ngIf="users.length > 0" class="search-results">
    <p class="section-title">Start a new chat:</p>
    <ul>
      <li
        *ngFor="let user of users"
        (click)="startDirectChat(user.username)"
        class="user-item"
      >
        👤 {{ user.username }}
      </li>
    </ul>
  </div>

  <!-- 💬 Combined Chat List -->
  <div *ngIf="chats.length > 0; else noChats" class="chat-list-section">
    <p class="section-title">Your Chats</p>
    <ul class="chat-list">
      <li
        *ngFor="let chat of chats"
        class="chat-item"
        (click)="openChat(chat)"
      >
        <!-- ✅ Show correct name -->
        <span>
          {{ chat.isPrivate ? '👤 ' + chat.displayName : '💬 ' + chat.name }}
        </span>

        <!-- 🗑 Delete button -->
        <button
          class="delete-btn"
          (click)="deleteChat(chat, $event)"
          title="Delete chat"
        >
          🗑
        </button>
      </li>
    </ul>
  </div>

  <!-- 💤 No Chats -->
  <ng-template #noChats>
    <div class="no-chats">
      <p>No chats yet.</p>
    </div>
  </ng-template>
</div>
