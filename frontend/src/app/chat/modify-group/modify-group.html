<div class="modify-group-container">
  <h2>🛠 Modify Group</h2>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-text">
    Loading group info...
  </div>

  <!-- Success / Error Message -->
  <div *ngIf="message" class="message-box">
    <span
      [ngClass]="{
        'text-success': message.startsWith('✅'),
        'text-error': message.startsWith('❌'),
        'text-warning': message.startsWith('⭐')
      }"
    >
      {{ message }}
    </span>
  </div>

  <!-- Members Section -->
  <div class="section">
    <h3>👥 Current Members</h3>
    <div *ngIf="members.length === 0" class="empty-text">
      No members in this group yet.
    </div>

    <ul class="member-list">
      <li *ngFor="let member of members" class="member-item">
        <div class="member-info">
          <span class="member-name">{{ member }}</span>
          <span
            *ngIf="admins.includes(member)"
            class="admin-badge"
          >
            Admin
          </span>
        </div>

        <div class="member-actions">
          <button
            (click)="promoteToAdmin(member)"
            *ngIf="!admins.includes(member)"
            class="btn btn-yellow"
          >
            Promote
          </button>

          <button
            (click)="removeMember(member)"
            class="btn btn-red"
          >
            Remove
          </button>
        </div>
      </li>
    </ul>
  </div>

  <!-- Add Members Section -->
  <div class="section border-top">
    <h3>➕ Add Members</h3>

    <div *ngIf="users.length === 0" class="empty-text">
      No users available.
    </div>

    <div class="user-grid">
      <label
        *ngFor="let user of users"
        class="user-item"
      >
        <input
          type="checkbox"
          (change)="onMemberToggle(user.username, $event.target.checked)"
          [checked]="members.includes(user.username)"
        />
        <span>{{ user.username }}</span>
      </label>
    </div>

    <button
      (click)="addMembers()"
      [disabled]="loading"
      class="btn btn-blue full-width"
    >
      {{ loading ? 'Adding...' : 'Add Selected Members' }}
    </button>
  </div>

  <!-- Back Button -->
  <div class="back-container">
    <button (click)="router.navigate(['/chat-list'])" class="back-btn">
      ← Back to Chats
    </button>
  </div>
</div>
